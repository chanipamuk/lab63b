# การทดลองที่ 3 เรื่องการเขียนโปรแกรมเอ้าพุทสัญญาณดิจิทัล
## วัตถุประสงค์
1. เพื่อให้นักศึกษารู้ขั้นตอนในการอัปโหลดโปรแกรมลงใน Microcontroller ESP-01
2. เพื่อให้นักศึกษารู้ว่าบอร์ด ESP-01 สามารถเขียนโปรแกรมที่สามารถแสดงผลลัพธ์ในรูปแบบของสัญญาณดิจิตอลได้
3. เพื่อให้นักศึกษารู้ว่า relay สามารถทำหน้าที่เป็นสวิทต์ เปิด-ปิด LED เปล่งแสง
## อุปกรณที่ใช้
* บอร์ด ESP-01 (microcontroller)
* สาย USB
* USB to serial port
* Adapter
* สาย port 0 และ port 1
* LED เปล่งแสง
* relay
## ศึกษาข้อมูลเบื้องต้น
* [Github ของอาจารย์ชุมพล](https://github.com/choompol-boonmee/lab63b)
* [คลิปการทดลองที่ 3.1](https://www.youtube.com/watch?v=CCnN1WJsXQY)
* [คลิปการทดลองที่ 3.2](https://www.youtube.com/watch?v=6JnhaUILGuw) 
## วิธีการทำการทดลอง
 1. ทำการต่อสาย USB เข้ากับตัว USB to serial port 
 2. ต่อ adapter เข้ากับตัว Serial port โดย adapter นั้นจะต่อเข้ากับ port 0 และ port 1 ซึ่งต่อเข้ากับ LED เปล่งแสง
 3. ต่อ Microcontroller ESP-01 เข้ากับ serial port (รูป1,2) 
 4. เข้าโปรแกรม เพื่อทำการรันโปรแกรม 
 5. ใช้คำสั่ง cd เพื่อทำการ path ไปยังโฟลเดอร์ทำการบันทึก codeไว้ โดย code จะมีรายละเอียดดังต่อไปนี้ดังต่อไปนี้ (รูป3)
 6. หลังจากนั้นใช้คำสั่ง `pio run -t upload` เพื่อทำการอัปโปรแกรมลงใน microcontroller (รูป4)
 7. ในระหว่างรอการอัปโหลดให้ทำการกดปุ่มสีดำและปุ่ม Reset บริเวณ microcontroller เพื่อให้ microcontroller รับโปรแกรมใหม่เข้าไป (รูป5)
 8. เมื่อลงโปรแกรมเสร็จ (รูป6)
 9. ใช้คำสั่ง `pio run device monitor` เพื่อดูผลลัพธ์ ซึ่งเป็นการรัน code จากข้อ 5 (รูป7)
 10. เมื่อกดปุ่ม reset ผลลัธ์ที่ได้จะกลับไปเริ่มใหม่(รูป8)
 
 เมื่อใช้ Microcontroller ESP-01 (ที่ทำการลงโปรแกรมแล้ว) ต่อเข้ากับ relay โดย relay จะทำหน้าที่เป็นสวิตท์ให้กับวงจร(เปิด-ปิดLED เปล่งแสง) (รูป9)
## การบันทึกผลการทดลอง
* ผลการทดลองเมื่อทำการรันโปรแกรมที่ลงเสร็จ (รูป7)
* ผลการทดลองเมื่อทำการกด Reset (รูป8)
## อภิปรายผลการทดลอง
* จากผลการทดลองที่เกิดขึ้นจะเห็นได้ว่าเมื่อทำการรันโปรแกรมจะทำการรันเป็น loop ไปเรื่อยๆตามคำสั่งที่ได้เขียนและอัปโหลดลงใน microcontroller ซึ่งผลลัพธ์ที่เกิดขึ้นคือ LED เปลงแสงจะสลับเปิดและปิดไฟไปเรื่อยๆไม่สิ้นสุด และหากเรากดที่ปุ่ม Reset ที่ microcontroller จะเริ่มต้นการรันใหม่อีกครั้ง
## คำถามหลังการทดลอง
* คำถาม ตัว Microcontroller ESP-01 สามารถเปลี่ยนเวลาำงานทุก 0.5 วินาทีเป็น 7 วินาทีได้ไหม ทำอย่างไร
* ตอบ โดยการเเก้ไข code บรรทัดที่ 23 จาก delay(500) เป็น delay(7000)


